### Анализ, идентификация проблем и решений, планирование.

1. **Анализ проблемных мест в системе**
   <br>
   - 1.1. **Проблемы с производительностью и масштабируемостью**
       <br>
       - 1.1.1. **<i>Долгая загрузка страницы заказов в MES.</i>**  
       Операторы испытывают проблемы с загрузкой дашборда заказов, даже при использовании фильтрации и пагинации.<br>
       - 1.1.2. **<i>Долгий расчёт стоимости заказов в MES (до 30 минут).</i>**  
       При сложных 3D-моделях расчёт стоимости занимает много времени, что замедляет выполнение заказов.<br>
       - 1.1.3. **<i>Потеря заказов.</i>**  
       Кажется, из-за потери сообщений от MES в CRM через RabbitMQ под возросшей нагрузкой.<br>
       - 1.1.4. **<i>Линейный рост заказов увеличивает нагрузку на систему.</i>**  
       Заказов становится всё больше, а система начинает испытывать проблемы с обработкой.<br>

   - 1.2. **Проблемы с управлением заказами и выполнением сроков**
       - 1.2.1. **<i>Нарушение сроков выполнения заказов.</i>**  
       Производство не справляется с нагрузкой, но заказы поступают в работу с опозданием.<br>
       - 1.2.2. **<i>Проблемы с API для внешних пользователей.</i>**  
       Внешние пользователи жалуются на задержки и потерю заказов, что приводит к потере контрактов.<br>
       - 1.2.3. **<i>Отсутствие приоритизации заказов для операторов.</i>**  
       Операторы хотят видеть новые заказы первыми, но система не предоставляет такой возможности.<br>

   - 1.3. **Проблемы в процессах разработки и релизов**
       - 1.3.1. **<i>Отсутствие автоматизации тестов.</i>**  
       Нет автоматизированных тестов, что увеличивает время на проверку версий.<br>

   - 1.4. **Проблемы с мониторингом и управлением инфраструктурой**
       - 1.4.1. **<i>Отсутствие централизованного мониторинга.</i>**  
       Сложно оперативно выявлять проблемы и узкие места в работе системы.<br>
       - 1.4.2. **<i>Неполные логи и отсутствие метрик.</i>**  
       Логи недостаточно информативны, что затрудняет анализ проблем.<br>
2. **Инициативы для устранения проблем**<br>
   - 2.1. **Разделение заказов по статусам** в отдельные партиции или таблицы.<br>
   - 2.2. **Вынос долгих расчётов** в асинхронные задачи с уведомлением клиента о готовности.<br>
   - 2.3. **Миграция RabbitMQ на Kafka** для более устойчивой и масштабируемой обработки сообщений из очереди.<br>
   - 2.4. **Введение SLA на API** для внешних пользователей с мониторингом задержек и неудачных вызовов.<br>
   - 2.5. **Внедрение автоматизированного тестирования** для ускорения проверки новых версий.<br>
   - 2.6. **Оптимизация процессов релизов**, включая автоматический деплой в release-окружение.<br>
   - 2.7. **Внедрение дашборда с метриками** выполнения заказов и задержек в реальном времени.<br>
   - 2.8. **Добавление алертов** для администраторов по нарушениям SLA.<br>
   - 2.9. **Кеширование списка заказов**, которые недавно были обновлены или назначены операторам. Использовать Redis для хранения таких данных, чтобы при загрузке страницы данные брались из кеша.<br>
   - 2.10. **Загрузка только новых и приоритетных заказов** при открытии страницы, чтобы ускорить работу операторов.<br>
   - 2.11. **Разделение таблиц** для активных и завершённых заказов, чтобы минимизировать объём данных для фильтрации.<br>
   - 2.12. **Использование индексов на полях**, часто применяемых в фильтрах (например, статус заказа, дата последнего обновления).<br>
   - 2.13. **Внедрение push-уведомлений или e-mail уведомлений** для заказов с высоким приоритетом, чтобы операторы могли сразу взять заказ в работу.<br>
   - 2.14. **Разделение процесса расчёта стоимости** в MES на несколько этапов с выполнением их параллельно.<br>
   - 2.15. **Использование Prometheus и Grafana** для отслеживания производительности API, времени загрузки страниц и активности операторов.<br>
   - 2.16. **Настройка алертов** по превышению нормальных значений времени обработки заказов.<br>
   - 2.17. **Сбор логов** по запросам к базам данных и обработке заказов.<br>
   - 2.18. **Анализ задержек в расчётах** и загрузке данных с использованием ELK-стека (Elasticsearch, Logstash, Kibana).<br>
   - 2.19. **Создание отдельных сервисов** для работы с заказами, расчёта стоимости и управления статусами. Это снизит зависимость компонентов и повысит масштабируемость. Использовать Kafka или RabbitMQ для обмена данными между микросервисами, чтобы обрабатывать всё параллельно.<br>
3. **Приоритизация инициатив**<br>
   - 3.1. **Оптимизация производительности MES** (кеширование, ленивая загрузка, приоритизация заказов).<br>
   - 3.2. **Переход с RabbitMQ на Kafka** для повышения стабильности и масштабируемости.<br>
   - 3.3. **Внедрение автоматизации тестирования** и оптимизация CI/CD.<br>
   - 3.4. **Асинхронные расчёты стоимости** с уведомлением клиентов.<br>
   - 3.5. **Мониторинг системы с помощью Prometheus и Grafana.**<br>
   - 3.6. **Разделение MES на микросервисы** для улучшения масштабируемости.<br>
   - 3.7. **Улучшение логирования и внедрение ELK-стека.**<br>
   - 3.8. **Внедрение дополнительных метрик для API и производительности.**<br>
   - 3.9. **Создание архивных таблиц для старых заказов** для уменьшения нагрузки на БД.<br>
4. **Целевая архитектура через полгода**<br>
   - 4.1. Через полгода система будет более устойчивой к нагрузкам благодаря миграции на Kafka и оптимизации MES. Автоматизация тестирования позволит ускорить релизы, а дашборды и метрики обеспечат своевременное выявление проблем. Заказы будут обрабатываться быстрее за счёт параллельного расчёта стоимости, а операторы получат удобный интерфейс с приоритетами для новых заказов.<br>
5. **Приоритетные три инициативы на полгода и обоснование**<br>
   - 5.1. **Оптимизация производительности MES.**  
   Это наиболее очевидная и болезненная проблема, так как напрямую влияет на операторов и выполнение заказов.<br>
   - 5.2. **Переход на Kafka вместо RabbitMQ.**  
   Благодаря более надёжному брокеру при заполнении очередей компания не будет терять заказы клиентов.<br>
   - 5.3. **Мониторинг системы с помощью Prometheus и Grafana и Внедрение дополнительных метрик для API и производительности.**  
   Дадут понимание, как работает система и какие будут следующие инициативы по улучшению.<br>
