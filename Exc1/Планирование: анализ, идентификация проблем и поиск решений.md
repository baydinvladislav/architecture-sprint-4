### Анализ, идентификация проблем и решений, планирование.

1. **Анализ проблем в системе:**
    - **<i>Потери/задержки заказов клиентов магазина и клиентов API:</i>**
      Потери и задержки заказов не дают бизнесу развиваться, отпугивая клиентов и партнёров.
    - **<i>Долгая загрузка главной страницы заказов в MES:</i>**
      Операторы испытывают проблемы с загрузкой дашборда заказов, даже при использовании фильтрации и пагинации.
    - **<i>Исправления багов занимает много времени, релизы откладываются:</i>**
      При тестировании найденные баги долго исправляются, откладывая релиз, что не даёт быстро вносить исправления и доносить фичи.

2. **Инициативы для устранения проблем:**
    - Добавить трейсинг, чтобы понять, на каком из этапов обработки теряются/зависают заказы.
    - Партиционирование заказов по статусам, чтобы можно было выводить заказы, используя запросы к партиции заказов с нужным операторам статусом.
    - Внедрение автоматизированного тестирования, чтобы не допустить "сырой" код разработчика к тестированию, а также сократить время на проверку новых версий тестировщиком, уменьшив ручной труд. Создать автоматизированные тесты для основных сценариев. Нанять нового разработчика тому сервису, чьи релизы часто в такой ситуации. Не лишним будет нанять ещё одного тестировщика, если один не справляется при переключении между задачами.
    - Введение SLA на API для внешних пользователей с мониторингом задержек и неудачных вызовов, чтобы предотвратить жалобы партнёров.
    - Внедрение дашборда с метриками выполнения заказов и задержек в реальном времени, чтобы видеть, какие заказы утеряны/зависли.
    - Разделение процесса расчёта стоимости в MES на несколько этапов с выполнением их параллельно. Для этого можно будет вынести долгие процессы MES в отдельные сервисы.
    - Использовать паттерн Outbox, чтобы гарантировать доставку сообщений `at least once`, не забыв добавить идемпотентность на стороне потребителя.
    - Использование Prometheus и Grafana для отслеживания производительности API, времени загрузки страниц и активности операторов.
    - Настройка алертов по превышению нормальных значений времени обработки заказов.
    - Настройка e-mail или push-уведомлений для операторов о поступлении нового заказа.

3. **Целевая архитектура через полгода:**
    - Через полгода мы узнали, где происходят потери заказов, и устранили проблемы в этих местах. Наши операторы используют партиции нужных записей для обработки заказов и быстро начинают брать заказ, получив уведомление о новом заказе. Также у нас есть Grafana для обзора работы системы, а ещё у нас есть алерты и метрики на задержки заказов.

4. **Приоритетные три инициативы на полгода и обоснование:**
    - Добавить трейсинг: это позволит нам узнать узкие места системы и начать их ликвидировать.
    - Добавить алерты на задержку заказов: так мы всегда будем в курсе, что у нас есть проблемные заказы, которые требуют внимания.
    - Внедрить автоматическое тестирование, чтобы сократить время доставки исправлений.
